{"ast":null,"code":"var _jsxFileName = \"/Users/lance/myProject/nostr-client-web/src/App.js\",\n  _s = $RefreshSig$();\nimport logo from './logo.svg';\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\nimport Vote from './vote';\nimport Detial from './detail';\nimport NewVote from './new_vote';\nimport Login from './login';\nimport React, { useEffect } from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { Relay, generateSecretKey, getPublicKey } from 'nostr-tools';\nimport { finalizeEvent, verifyEvent } from 'nostr-tools';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  // const relay = await Relay.connect('wss://relay.example.com')\n  useEffect(() => {\n    connectAndSubscribe();\n  }, []);\n  async function connectAndSubscribe() {\n    try {\n      const relay = await Relay.connect('wss://3f21-183-197-145-83.ngrok-free.app');\n      console.log(`Connected to ${relay.url}`);\n      const sub = relay.subscribe([{\n        ids: ['0c6790fa6ffe648571a5a322a3d4410a610d9bfca015be354f9d7811ab2510ae']\n      }], {\n        onevent(event) {\n          console.log('We got the event we wanted:', event);\n        },\n        oneose() {\n          sub.close();\n        }\n      });\n      let sk = generateSecretKey();\n      let pk = getPublicKey(sk);\n      relay.subscribe([{\n        kinds: [1],\n        authors: [pk]\n      }], {\n        onevent(event) {\n          console.log('Got event:', event);\n        }\n      });\n      let eventTemplate = {\n        kind: 1,\n        created_at: Math.floor(Date.now() / 1000),\n        tags: [],\n        content: 'hello world'\n      };\n      const signedEvent = finalizeEvent(eventTemplate, sk);\n      await relay.publish(signedEvent);\n      relay.close();\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(BrowserRouter, {\n    children: /*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(Vote, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/login\",\n        element: /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 39\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/detail\",\n        element: /*#__PURE__*/_jsxDEV(Detial, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 40\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/newvote\",\n        element: /*#__PURE__*/_jsxDEV(NewVote, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 41\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this)\n\n  // <div>\n  //    <p>hello</p>\n  //    <Vote />\n  //   </div>\n  ;\n}\n_s(App, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["logo","BrowserRouter","Routes","Route","Vote","Detial","NewVote","Login","React","useEffect","ReactDOM","Relay","generateSecretKey","getPublicKey","finalizeEvent","verifyEvent","jsxDEV","_jsxDEV","App","_s","connectAndSubscribe","relay","connect","console","log","url","sub","subscribe","ids","onevent","event","oneose","close","sk","pk","kinds","authors","eventTemplate","kind","created_at","Math","floor","Date","now","tags","content","signedEvent","publish","error","children","path","element","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/lance/myProject/nostr-client-web/src/App.js"],"sourcesContent":["import logo from './logo.svg';\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\nimport Vote from './vote';\nimport Detial from './detail';\nimport NewVote from './new_vote';\nimport Login from './login';\n\n\nimport React, { useEffect } from 'react';\nimport ReactDOM from 'react-dom/client';\n\nimport { Relay, generateSecretKey, getPublicKey } from 'nostr-tools'\nimport { finalizeEvent, verifyEvent } from 'nostr-tools'\n\n\nfunction App() {\n\n\n  // const relay = await Relay.connect('wss://relay.example.com')\n  useEffect(() => {\n    connectAndSubscribe();\n  }, []);\n\n  async function connectAndSubscribe() {\n    try {\n      const relay = await Relay.connect('wss://3f21-183-197-145-83.ngrok-free.app');\n      console.log(`Connected to ${relay.url}`);\n\n\n      \n      const sub = relay.subscribe(\n        [\n          {\n            ids: ['0c6790fa6ffe648571a5a322a3d4410a610d9bfca015be354f9d7811ab2510ae'],\n          },\n        ],\n        {\n          onevent(event) {\n            console.log('We got the event we wanted:', event);\n          },\n          oneose() {\n            sub.close();\n          },\n        }\n      );\n\n      let sk = generateSecretKey();\n      let pk = getPublicKey(sk);\n\n      relay.subscribe(\n        [\n          {\n            kinds: [1],\n            authors: [pk],\n          },\n        ],\n        {\n          onevent(event) {\n            console.log('Got event:', event);\n          },\n        }\n      );\n\n      let eventTemplate = {\n        kind: 1,\n        created_at: Math.floor(Date.now() / 1000),\n        tags: [],\n        content: 'hello world',\n      };\n\n      const signedEvent = finalizeEvent(eventTemplate, sk);\n      await relay.publish(signedEvent);\n\n      relay.close();\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  }\n\n\n\n  return (\n\n    <BrowserRouter>\n      <Routes>\n        <Route path=\"/\" element={<Vote />} />\n        <Route path=\"/login\" element={<Login />} />\n        <Route path=\"/detail\" element={<Detial />} />\n        <Route path=\"/newvote\" element={<NewVote />} />\n\n      </Routes>\n    </BrowserRouter>\n\n    // <div>\n    //    <p>hello</p>\n    //    <Vote />\n    //   </div>\n\n\n\n\n\n\n  );\n}\n\n\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}