{"ast":null,"code":"import logo from'./logo.svg';import{BrowserRouter,Routes,Route}from'react-router-dom';import Vote from'./vote';import Detial from'./detail';import NewVote from'./new_vote';import Login from'./login';import React,{useEffect}from'react';import ReactDOM from'react-dom/client';import{Relay,generateSecretKey,getPublicKey}from'nostr-tools';import{finalizeEvent,verifyEvent}from'nostr-tools';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){// const relay = await Relay.connect('wss://relay.example.com')\nuseEffect(()=>{// connectAndSubscribe();\n},[]);async function connectAndSubscribe(){try{const relay=await Relay.connect('ws://47.129.0.53:8080');console.log(\"Connected to \".concat(relay.url));const sub=relay.subscribe([{ids:['0c6790fa6ffe648571a5a322a3d4410a610d9bfca015be354f9d7811ab2510ae']}],{onevent(event){console.log('We got the event we wanted:',event);},oneose(){sub.close();}});let sk=generateSecretKey();let pk=getPublicKey(sk);relay.subscribe([{kinds:[1],authors:[pk]}],{onevent(event){console.log('Got event:',event);}});let eventTemplate={kind:1,created_at:Math.floor(Date.now()/1000),tags:[],content:'hello world'};const signedEvent=finalizeEvent(eventTemplate,sk);await relay.publish(signedEvent);relay.close();}catch(error){console.error('Error:',error);}}return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Vote,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/detail/:id\",element:/*#__PURE__*/_jsx(Detial,{})}),/*#__PURE__*/_jsx(Route,{path:\"/newvote\",element:/*#__PURE__*/_jsx(NewVote,{})})]})})// <div>\n//    <p>hello</p>\n//    <Vote />\n//   </div>\n;}export default App;","map":{"version":3,"names":["logo","BrowserRouter","Routes","Route","Vote","Detial","NewVote","Login","React","useEffect","ReactDOM","Relay","generateSecretKey","getPublicKey","finalizeEvent","verifyEvent","jsx","_jsx","jsxs","_jsxs","App","connectAndSubscribe","relay","connect","console","log","concat","url","sub","subscribe","ids","onevent","event","oneose","close","sk","pk","kinds","authors","eventTemplate","kind","created_at","Math","floor","Date","now","tags","content","signedEvent","publish","error","children","path","element"],"sources":["/Users/lance/myProject/nostr-client-web/src/App.js"],"sourcesContent":["import logo from './logo.svg';\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\nimport Vote from './vote';\nimport Detial from './detail';\nimport NewVote from './new_vote';\nimport Login from './login';\n\n\nimport React, { useEffect } from 'react';\nimport ReactDOM from 'react-dom/client';\n\nimport { Relay, generateSecretKey, getPublicKey } from 'nostr-tools'\nimport { finalizeEvent, verifyEvent } from 'nostr-tools'\n\n\nfunction App() {\n\n\n  // const relay = await Relay.connect('wss://relay.example.com')\n  useEffect(() => {\n    // connectAndSubscribe();\n  }, []);\n\n  async function connectAndSubscribe() {\n    try {\n      const relay = await Relay.connect('ws://47.129.0.53:8080');\n      console.log(`Connected to ${relay.url}`);\n\n\n      \n      const sub = relay.subscribe(\n        [\n          {\n            ids: ['0c6790fa6ffe648571a5a322a3d4410a610d9bfca015be354f9d7811ab2510ae'],\n          },\n        ],\n        {\n          onevent(event) {\n            console.log('We got the event we wanted:', event);\n          },\n          oneose() {\n            sub.close();\n          },\n        }\n      );\n\n      let sk = generateSecretKey();\n      let pk = getPublicKey(sk);\n\n      relay.subscribe(\n        [\n          {\n            kinds: [1],\n            authors: [pk],\n          },\n        ],\n        {\n          onevent(event) {\n            console.log('Got event:', event);\n          },\n        }\n      );\n\n      let eventTemplate = {\n        kind: 1,\n        created_at: Math.floor(Date.now() / 1000),\n        tags: [],\n        content: 'hello world',\n      };\n\n      const signedEvent = finalizeEvent(eventTemplate, sk);\n      await relay.publish(signedEvent);\n\n      relay.close();\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  }\n\n\n\n  return (\n\n    <BrowserRouter>\n      <Routes>\n        <Route path=\"/\" element={<Vote />} />\n        <Route path=\"/login\" element={<Login />} />\n        <Route path=\"/detail/:id\" element={<Detial />} />\n        <Route path=\"/newvote\" element={<NewVote />} />\n\n      </Routes>\n    </BrowserRouter>\n\n    // <div>\n    //    <p>hello</p>\n    //    <Vote />\n    //   </div>\n\n\n\n\n\n\n  );\n}\n\n\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}